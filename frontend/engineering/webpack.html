<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack | 技术知识体系</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="技术知识体系">
    
    <link rel="preload" href="/assets/css/0.styles.c5842e21.css" as="style"><link rel="preload" href="/assets/js/app.622a38ae.js" as="script"><link rel="preload" href="/assets/js/3.dbdea4db.js" as="script"><link rel="preload" href="/assets/js/9.998d95d7.js" as="script"><link rel="prefetch" href="/assets/js/10.5f72e054.js"><link rel="prefetch" href="/assets/js/11.202566d3.js"><link rel="prefetch" href="/assets/js/12.49aec3b9.js"><link rel="prefetch" href="/assets/js/13.137a11b7.js"><link rel="prefetch" href="/assets/js/14.bc1fbbf7.js"><link rel="prefetch" href="/assets/js/15.f690ee11.js"><link rel="prefetch" href="/assets/js/16.3e11d4e6.js"><link rel="prefetch" href="/assets/js/17.3c086bf7.js"><link rel="prefetch" href="/assets/js/18.a7a49407.js"><link rel="prefetch" href="/assets/js/19.654d46fc.js"><link rel="prefetch" href="/assets/js/2.2988ea3a.js"><link rel="prefetch" href="/assets/js/20.028d5f6c.js"><link rel="prefetch" href="/assets/js/21.6f17a44d.js"><link rel="prefetch" href="/assets/js/22.f7ba30bb.js"><link rel="prefetch" href="/assets/js/23.2ad4ef9f.js"><link rel="prefetch" href="/assets/js/24.e436e64f.js"><link rel="prefetch" href="/assets/js/25.d8c2b121.js"><link rel="prefetch" href="/assets/js/26.cd8773a8.js"><link rel="prefetch" href="/assets/js/27.1812464d.js"><link rel="prefetch" href="/assets/js/28.83767ccc.js"><link rel="prefetch" href="/assets/js/29.845bbc0a.js"><link rel="prefetch" href="/assets/js/30.48868523.js"><link rel="prefetch" href="/assets/js/31.9be2c365.js"><link rel="prefetch" href="/assets/js/32.44927465.js"><link rel="prefetch" href="/assets/js/33.9f7ccbfa.js"><link rel="prefetch" href="/assets/js/4.da8c0139.js"><link rel="prefetch" href="/assets/js/5.c58efe34.js"><link rel="prefetch" href="/assets/js/6.cfb556bd.js"><link rel="prefetch" href="/assets/js/7.f885fc81.js"><link rel="prefetch" href="/assets/js/8.7b83a960.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c5842e21.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">技术知识体系</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/frontend/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/js/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend/engineering/" class="nav-link router-link-active">
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/frontend/vue/" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/frontend/react/" class="nav-link">
  React
</a></li></ul></div></div><div class="nav-item"><a href="/android/" class="nav-link">
  安卓
</a></div><div class="nav-item"><a href="/middle/" class="nav-link">
  框架|中间件
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/db/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/db/mongodb/" class="nav-link">
  MongoDB
</a></li></ul></div></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><span class="title">运维</span> <span class="arrow down"></span></button> <button type="button" aria-label="运维" class="mobile-dropdown-title"><span class="title">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/container/" class="nav-link">
  容器
</a></li><li class="dropdown-item"><!----> <a href="/k8s/" class="nav-link">
  k8s
</a></li></ul></div></div><div class="nav-item"><a href="/bigdata/" class="nav-link">
  大数据
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="嵌入式" class="dropdown-title"><span class="title">嵌入式</span> <span class="arrow down"></span></button> <button type="button" aria-label="嵌入式" class="mobile-dropdown-title"><span class="title">嵌入式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/iot/digital/" class="nav-link">
  C/C++
</a></li><li class="dropdown-item"><!----> <a href="/iot/51/" class="nav-link">
  51单片机
</a></li></ul></div></div><div class="nav-item"><a href="/pmp/" class="nav-link">
  项目管理
</a></div><div class="nav-item"><a href="/blog/" class="nav-link">
  个人博客
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/frontend/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/js/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend/engineering/" class="nav-link router-link-active">
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/frontend/vue/" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/frontend/react/" class="nav-link">
  React
</a></li></ul></div></div><div class="nav-item"><a href="/android/" class="nav-link">
  安卓
</a></div><div class="nav-item"><a href="/middle/" class="nav-link">
  框架|中间件
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/db/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/db/mongodb/" class="nav-link">
  MongoDB
</a></li></ul></div></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><span class="title">运维</span> <span class="arrow down"></span></button> <button type="button" aria-label="运维" class="mobile-dropdown-title"><span class="title">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/container/" class="nav-link">
  容器
</a></li><li class="dropdown-item"><!----> <a href="/k8s/" class="nav-link">
  k8s
</a></li></ul></div></div><div class="nav-item"><a href="/bigdata/" class="nav-link">
  大数据
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="嵌入式" class="dropdown-title"><span class="title">嵌入式</span> <span class="arrow down"></span></button> <button type="button" aria-label="嵌入式" class="mobile-dropdown-title"><span class="title">嵌入式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/iot/digital/" class="nav-link">
  C/C++
</a></li><li class="dropdown-item"><!----> <a href="/iot/51/" class="nav-link">
  51单片机
</a></li></ul></div></div><div class="nav-item"><a href="/pmp/" class="nav-link">
  项目管理
</a></div><div class="nav-item"><a href="/blog/" class="nav-link">
  个人博客
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端工程化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/engineering/webpack.html" aria-current="page" class="active sidebar-link">webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/engineering/webpack.html#基本使用" class="sidebar-link">基本使用</a></li><li class="sidebar-sub-header"><a href="/frontend/engineering/webpack.html#plugin" class="sidebar-link">plugin</a></li><li class="sidebar-sub-header"><a href="/frontend/engineering/webpack.html#loader" class="sidebar-link">loader</a></li><li class="sidebar-sub-header"><a href="/frontend/engineering/webpack.html#打包发布" class="sidebar-link">打包发布</a></li><li class="sidebar-sub-header"><a href="/frontend/engineering/webpack.html#source-map" class="sidebar-link">Source Map</a></li><li class="sidebar-sub-header"><a href="/frontend/engineering/webpack.html#总结" class="sidebar-link">总结</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack"><a href="#webpack" class="header-anchor">#</a> webpack</h1> <h2 id="基本使用"><a href="#基本使用" class="header-anchor">#</a> 基本使用</h2> <p><strong>1. 什么是 webpack</strong></p> <p>概念：webpack 是<code>前端项目工程化的具体解决方案</code>。</p> <p>主要功能：它提供了友好的<code>前端模块化开发</code>支持，以及<code>代码压缩混淆</code>、<code>处理浏览器端 JavaScript 的兼容性</code>、<code>性能优化</code>等强大的功能。</p> <p>好处：让程序员把<code>工作的重心</code>放到具体功能的实现上，提高了前端<code>开发效率</code>和项目的<code>可维护性</code>。</p> <p>注意：目前 Vue，React 等前端项目，基本上都是基于 webpack 进行工程化开发的。</p> <p><br><br></p> <p><strong>2. 创建列表隔行变色项目</strong></p> <p>1&gt;新建项目空白目录webpack_demo，并运行 npm init –y 命令，初始化包管理配置文件 package.json</p> <div class="language-powershell extra-class"><pre class="language-powershell"><code>D:\blog_code\webpack_demo&gt;npm init <span class="token operator">-</span>y
Wrote to D:\blog_code\webpack_demo\package<span class="token punctuation">.</span>json:

<span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span>: <span class="token string">&quot;webpack_demo&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span>: <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;description&quot;</span>: <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;main&quot;</span>: <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span>: <span class="token punctuation">{</span>
    <span class="token string">&quot;test&quot;</span>: <span class="token string">&quot;echo \&quot;</span>Error: no test specified\<span class="token string">&quot; &amp;&amp; exit 1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;keywords&quot;</span>: <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;author&quot;</span>: <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;license&quot;</span>: <span class="token string">&quot;ISC&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2&gt;项目目录下，新建 src 源代码目录</p> <p>3&gt;新建 src -&gt; index.html 首页和 src -&gt; index.js 脚本文件</p> <p>4&gt;初始化首页 index.html 基本的结构</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>隔行变色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>第1行<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>第2行<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>第3行<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>第4行<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>第5行<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>第6行<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>第7行<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>第8行<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./index.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>5&gt;运行 npm install jquery –S 命令，安装 jQuery</p> <div class="language-powershell extra-class"><pre class="language-powershell"><code>D:\blog_code\webpack_demo&gt;npm install jquery <span class="token operator">-</span>S
npm notice created a lockfile as package-lock<span class="token punctuation">.</span>json<span class="token punctuation">.</span> You should commit this file<span class="token punctuation">.</span>
npm WARN webpack_demo@1<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0 No description
npm WARN webpack_demo@1<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0 No repository field<span class="token punctuation">.</span>

<span class="token operator">+</span> jquery@3<span class="token punctuation">.</span>6<span class="token punctuation">.</span>0
added 1 package <span class="token keyword">from</span> 1 contributor and audited 1 package in 2<span class="token punctuation">.</span>821s
found 0 vulnerabilities
</code></pre></div><p>6&gt;通过 ES6 模块化的方式，在 index.js 中导入 jQuery，实现列表隔行变色效果</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">'jquery'</span>

<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#test &gt; li:odd'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background-color'</span><span class="token punctuation">,</span> <span class="token string">'#ccc'</span><span class="token punctuation">)</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#test &gt; li:even'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background-color'</span><span class="token punctuation">,</span> <span class="token string">'#f00'</span><span class="token punctuation">)</span>
</code></pre></div><p>7&gt;浏览器打开 index.html，控制台报错。目前浏览器还不支持直接使用 es6 的 import 语法。</p> <img height="220" src="/assets/img/00002.394adc26.png" alt="结果"> <p>使用 webpack 可以解决上述问题</p> <p><br><br></p> <p><strong>3. 在项目中安装 webpack</strong></p> <p>在终端运行如下的命令，安装 webpack 相关的两个包：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> webpack@5.42.1 webpack-cli@4.9.2 -D
</code></pre></div><p><br><br></p> <p><strong>4. 在项目中配置 webpack</strong></p> <p>1&gt;在项目根目录中，创建名为 <code>webpack.config.js</code> 的 webpack 配置文件，并初始化如下的基本配置：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span> <span class="token comment">//mode 用来指定构建模式。可选值有 development 和 production</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2&gt;在 package.json 的 scripts 节点下，新增 <code>dev 脚本</code>如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span> <span class="token comment">//script 节点下的脚本，可以通过 npm run 执行。例如：npm run dev</span>
<span class="token punctuation">}</span>
</code></pre></div><p>3&gt;在终端中运行 <code>npm run dev</code> 命令，启动 webpack 进行项目的打包构建</p> <div class="language-powershell extra-class"><pre class="language-powershell"><code>D:\blog_code\webpack_demo&gt;npm run dev

&gt; webpack_demo@1<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0 dev D:\blog_code\webpack_demo
&gt; webpack

asset main<span class="token punctuation">.</span>js 323 KiB <span class="token namespace">[emitted]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span>
runtime modules 937 bytes 4 modules
cacheable modules 282 KiB
  <span class="token punctuation">.</span><span class="token operator">/</span>src/index<span class="token punctuation">.</span>js 132 bytes <span class="token namespace">[built]</span> <span class="token namespace">[code generated]</span>
  <span class="token punctuation">.</span><span class="token operator">/</span>node_modules/jquery/dist/jquery<span class="token punctuation">.</span>js 282 KiB <span class="token namespace">[built]</span> <span class="token namespace">[code generated]</span>
webpack 5<span class="token punctuation">.</span>42<span class="token punctuation">.</span>1 compiled successfully in 327 ms
</code></pre></div><p>webpack 默认会根据 index.js 内容，编译生成 dist -&gt; main.js 脚本文件</p> <p>4&gt;将 index.html 文件中引入的脚本 index.js，修改为 main.js</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../dist/main.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>5&gt;浏览器打开 index.html，实现了隔行变色</p> <img src="data:image/png;base64,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" alt="结果"> <br> <p><strong>4.1 mode 的可选值</strong></p> <p><code>mode 节点</code>的可选值有两个，分别是：</p> <ol><li><p>development</p> <ul><li><code>开发环境</code></li> <li><code>不会</code>对打包生成的文件进行<code>代码压缩</code>和<code>性能优化</code></li> <li>打包<code>速度快</code>，适合在<code>开发阶段</code>使用</li></ul></li> <li><p>production</p> <ul><li><code>生产环境</code></li> <li><code>会</code>对打包生成的文件进行<code>代码压缩</code>和<code>性能优化</code></li> <li>打包<code>速度很慢</code>，仅适合在项目<code>发布阶段</code>使用</li></ul></li></ol> <br> <p><strong>4.2 webpack.config.js 文件的作用</strong></p> <p>webpack.config.js 是 webpack 的配置文件。webpack 在真正开始打包构建之前，会先读取这个<code>配置文件</code>，
从而基于给定的配置，对项目进行打包。</p> <p>注意：由于 webpack 是<code>基于 node.js 开发出来的</code>打包工具，因此在它的配置文件中，支持使用 node.js 相关
的语法和模块进行 webpack 的个性化配置。</p> <br> <p><strong>4.3 webpack 中的默认约定</strong></p> <p>在 webpack 4.x 和 5.x 的版本中，有如下的默认约定：</p> <ol><li>默认的打包入口文件为 <code>src -&gt; index.js</code></li> <li>默认的输出文件路径为 <code>dist -&gt; main.js</code></li></ol> <p>注意：可以在 <code>webpack.config.js</code> 中修改打包的默认约定</p> <br> <p><strong>4.4 自定义打包的入口与出口</strong></p> <p>在 webpack.config.js 配置文件中，通过 <code>entry 节点</code>指定<code>打包的入口</code>。通过 <code>output 节点</code>指定<code>打包的出口</code>。</p> <p>示例代码如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span> <span class="token comment">//导入 node.js 中专门操作路径的模块</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//打包入口文件的路径</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.js'</span> <span class="token comment">//输出文件的名称</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span> <span class="token comment">//mode 用来指定构建模式。可选值有 development 和 production</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="plugin"><a href="#plugin" class="header-anchor">#</a> plugin</h2> <p><strong>1. 插件的作用</strong></p> <p>通过安装和配置第三方的插件，可以拓展 <code>webpack 的能力</code>，从而让 webpack <code>用起来更方便</code>。最常用的
webpack 插件有如下两个：</p> <ol><li><code>webpack-dev-server</code> <ul><li>类似于 node.js 阶段用到的 nodemon 工具</li> <li>每当修改了源代码，webpack 会自动进行项目的打包和构建</li></ul></li> <li><code>html-webpack-plugin</code> <ul><li>webpack 中的 HTML 插件（类似于一个模板引擎插件）</li> <li>可以通过此插件自定制 index.html 页面的内容</li></ul></li></ol> <p><br><br></p> <p><strong>2. webpack-dev-server</strong></p> <p><code>webpack-dev-server</code> 可以让 webpack <code>监听项目源代码的变化</code>，从而进行<code>自动打包构建</code>。</p> <br> <p><strong>2.1 安装 webpack-dev-server</strong></p> <p>运行如下的命令，即可在项目中安装此插件：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> webpack-dev-server@3.11.2 -D
</code></pre></div><br> <p><strong>2.2 配置 webpack-dev-server</strong></p> <p>1&gt;修改 package.json -&gt; scripts 中的 dev 命令如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack serve&quot;</span> <span class="token comment">//scripts 节点下的脚本，可以通过 npm run 执行</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2&gt;再次运行 <code>npm run dev</code> 命令，重新进行项目的打包</p> <p>3&gt;在浏览器中访问 <code>http://localhost:8080</code> 地址，查看自动打包效果</p> <blockquote><p>注意：webpack-dev-server 会启动一个<code>实时打包的 http 服务器</code></p></blockquote> <br> <p><strong>2.3 打包生成的文件哪儿去了？</strong></p> <ol><li>不配置 webpack-dev-server 的情况下，webpack 打包生成的文件，会存放到<code>实际的物理磁盘上</code> <ul><li>严格遵守开发者在 webpack.config.js 中指定配置</li> <li>根据 <code>output 节点</code>指定路径进行存放</li></ul></li> <li>配置了 webpack-dev-server 之后，打包生成的文件<code>存放到了内存中</code> <ul><li>不再根据 output 节点指定的路径，存放到实际的物理磁盘上</li> <li><code>提高了</code>实时打包输出的<code>性能</code>，因为内存比物理磁盘速度快很多</li></ul></li></ol> <br> <p><strong>2.4 生成到内存中的文件该如何访问？</strong></p> <p>webpack-dev-server 生成到内存中的文件，默认<code>放到了项目的根目录中</code>，而且是<code>虚拟的</code>、<code>不可见的</code>。</p> <ul><li>可以直接用 <code>/</code> 表示<code>项目根目录，后面跟上要访问的文件名称</code>，即可访问内存中的文件</li> <li>例如 <code>/bundle.js</code> 就表示要访问 webpack-dev-server 生成到内存中的 bundle.js 文件</li></ul> <div class="language-html extra-class"><pre class="language-html"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/bundle.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><br> <br> <p><strong>3. html-webpack-plugin</strong></p> <p>html-webpack-plugin 是 <code>webpack 中的 HTML 插件</code>，可以通过此插件<code>自定制</code> index.html <code>页面的内容</code>。
<code>需求</code>：通过 html-webpack-plugin 插件，将 src 目录下的 index.html 首页，<code>复制到项目根目录中一份</code>！</p> <br> <p><strong>3.1 安装 html-webpack-plugin</strong></p> <p>运行如下的命令，即可在项目中安装此插件：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> html-webpack-plugin@5.3.2 -D
</code></pre></div><br> <p><strong>3.2 配置 html-webpack-plugin</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span> <span class="token comment">//导入 node.js 中专门操作路径的模块</span>
<span class="token keyword">const</span> HtmlPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span> <span class="token comment">//导入html插件，得到一个构造函数</span>

<span class="token keyword">const</span> htmlPlugin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HtmlPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span> <span class="token comment">//指定源文件的存放路径</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./index.html'</span> <span class="token comment">//指定生成文件的存放路径</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//打包入口文件的路径</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.js'</span> <span class="token comment">//输出文件的名称</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span> <span class="token comment">//mode 用来指定构建模式。可选值有 development 和 production</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>htmlPlugin<span class="token punctuation">]</span> <span class="token comment">//通过 plugins 节点，使 htmlPlugin 插件生效</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <p><strong>3.3 解惑 html-webpack-plugin</strong></p> <p>1&gt;通过 HTML 插件复制到项目根目录中的 index.html 页面，<code>也被放到了内存中</code></p> <p>2&gt;HTML 插件在生成的 index.html 页面，<code>自动注入</code>了打包的 bundle.js 文件</p> <br> <br> <p><strong>4. devServer 节点</strong></p> <p>在 webpack.config.js 配置文件中，可以通过 <code>devServer</code> 节点对 webpack-dev-server 插件进行更多的配置，
示例代码如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//打包入口文件的路径</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.js'</span> <span class="token comment">//输出文件的名称</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span> <span class="token comment">//mode 用来指定构建模式。可选值有 development 和 production</span>
    <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//初次打包完成后，自动打开浏览器</span>
        <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> <span class="token comment">//实时打包所使用的主机地址</span>
        <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8888</span> <span class="token comment">//实时打包所使用的的端口号</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>htmlPlugin<span class="token punctuation">]</span> <span class="token comment">//通过 plugins 节点，使 htmlPlugin 插件生效</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>注意：凡是修改了 webpack.config.js 配置文件，或修改了 package.json 配置文件，<code>必须重启实时打包的服务器</code>，否则最新的配置文件无法生效！</p></blockquote> <h2 id="loader"><a href="#loader" class="header-anchor">#</a> loader</h2> <p><strong>1. loader 概述</strong></p> <p>在实际开发过程中，webpack 默认只能打包处理以 .js 后缀名结尾的模块。其他<code>非 .js 后缀名结尾的模块</code>，
webpack 默认处理不了，<code>需要调用 loader 加载器才可以正常打包</code>，否则会报错！</p> <p>loader 加载器的作用：<code>协助 webpack 打包处理特定的文件模块</code>。比如：</p> <ul><li>css-loader 可以打包处理 .css 相关的文件</li> <li>less-loader 可以打包处理 .less 相关的文件</li> <li>babel-loader 可以打包处理 webpack 无法处理的高级 JS 语法</li></ul> <br> <br> <p><strong>2. loader 的调用过程</strong></p> <img src="/assets/img/00004.69aaf387.png" alt="结果"> <br> <br> <p><strong>3. 打包处理 css 文件</strong></p> <p>1&gt;运行 <code>npm i style-loader@3.0.0 css-loader@5.2.6 -D</code> 命令，安装处理 css 文件的 loader</p> <p>2&gt;在 webpack.config.js 的 <code>module -&gt; rules</code> 数组中，添加 loader 规则如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span> <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>其中，<code>test</code> 表示匹配的<code>文件类型</code>， <code>use</code> 表示对应<code>要调用的 loader</code></p> <p>注意：</p> <ul><li>use 数组中指定的 loader <code>顺序是固定的</code></li> <li>多个 loader 的调用顺序是：<code>从后往前调用</code></li></ul></blockquote> <br> <br> <p><strong>4. 打包处理 less 文件</strong></p> <p>1&gt;运行 <code>npm i less-loader@10.0.1 less@4.1.1 -D</code> 命令</p> <p>2&gt;在 webpack.config.js 的 <code>module -&gt; rules</code> 数组中，添加 loader 规则如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span> <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'less-loader'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <br> <p><strong>5. 打包处理 <code>url 路径相关</code>的文件</strong></p> <p>1&gt;运行 <code>npm i url-loader@4.1.1 file-loader@6.2.0 -D</code> 命令</p> <p>2&gt;在 webpack.config.js 的 <code>module -&gt; rules</code> 数组中，添加 loader 规则如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span> <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jpg|png|gif$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">'url-loader?limit=22228'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>其中 <code>?</code> 之后的是 <code>loader 的参数项</code>：</p> <ul><li>limit 用来指定<code>图片的大小</code>，单位是字节（byte）</li> <li>只有 <code>≤ limit</code> 大小的图片，才会被转为 base64 格式的图片</li></ul></blockquote> <blockquote><ul><li>webpack加载css背景图片、img元素指向的网络图片、使用es6的import引入的图片时，需要使用url-loader或者file-loader。</li> <li>url-loader和file-loader可以加载任何文件。</li> <li>url-loader可以将图片转为base64字符串，能更快的加载图片，一旦图片过大，就需要使用file-loader的加载本地图片，故url-loader可以设置图片超过多少字节时，使用file-loader加载图片。</li></ul></blockquote> <br> <br> <p><strong>6. 打包处理 js 文件中的高级语法</strong></p> <p>webpack 只能打包处理<code>一部分</code>高级的 JavaScript 语法。对于那些 webpack 无法处理的高级 js 语法，需要借
助于 <code>babel-loader</code> 进行打包处理。例如 webpack 无法处理下面的 JavaScript 代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1. 定义了名为 info 的装饰器</span>
<span class="token keyword">function</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 2. 为目标添加静态属性 info</span>
    target<span class="token punctuation">.</span>info <span class="token operator">=</span> <span class="token string">'Person info'</span>
<span class="token punctuation">}</span>

<span class="token comment">// 3. 为 Person 类应用 info 装饰器</span>
@info
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 4. 打印 Person 的静态属性</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>info<span class="token punctuation">)</span>
</code></pre></div><br> <p><strong>6.1 安装 babel-loader 相关的包</strong></p> <p>运行如下的命令安装对应的依赖包：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i babel-loader@8.2.2 @babel/core@7.14.6 @babel/plugin-proposal-decorators@7.14.5 -D
</code></pre></div><p>在 webpack.config.js 的 <code>module -&gt; rules</code> 数组中，添加 loader 规则如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token comment">//文件后缀名的匹配规则</span>
            <span class="token comment">//注意：必须使用 exclude 指定排除项；因为 node_modules 目录下的第三方包不需要被打包</span>
            <span class="token punctuation">{</span> <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span> <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token string">'/mode_modules/'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <p><strong>6.2 配置 babel-loader</strong></p> <p>在项目根目录下，创建名为 <code>babel.config.js</code> 的配置文件，定义 Babel 的配置项如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 声明 babel 可用的插件</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'@babel/plugin-proposal-decorators'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">legacy</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>详情请参考 Babel 的官网 https://babeljs.io/docs/en/babel-plugin-proposal-decorators</p></blockquote> <h2 id="打包发布"><a href="#打包发布" class="header-anchor">#</a> 打包发布</h2> <p><strong>1. 为什么要打包发布</strong></p> <p><code>项目开发完成之后</code>，需要使用 webpack <code>对项目进行打包发布</code>，主要原因有以下两点：</p> <ol><li>开发环境下，打包生成的文件<code>存放于内存中</code>，无法获取到最终打包生成的文件</li> <li>开发环境下，打包生成的文件<code>不会进行代码压缩和性能优化</code></li></ol> <p><code>为了让项目能够在生产环境中高性能的运行</code>，因此需要对项目进行打包发布。</p> <br> <br> <p><strong>2. 配置 webpack 的打包发布</strong></p> <p>在 <code>package.json</code> 文件的 <code>scripts</code> 节点下，新增 build 命令如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack serve&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 开发环境下，运行 dev 命令</span>
  <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --mode production&quot;</span> <span class="token comment">// 项目发布时，运行 build 命令</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>--model</code> 是一个参数项，用来指定 webpack 的<code>运行模式</code>。production 代表生产环境，会对打包生成的文件
进行<code>代码压缩</code>和<code>性能优化</code>。</p> <p>注意：通过 --model 指定的参数项，会<code>覆盖</code> webpack.config.js 中的 model 选项。</p></blockquote> <br> <br> <p><strong>3. 把 JavaScript 文件统一生成到 js 目录中</strong></p> <p>在 <code>webpack.config.js</code> 配置文件的 <code>output</code> 节点中，进行如下的配置：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">//明确告诉 webpack 把生成的 bundle.js 文件存放到 dist 目录下的 js 子目录中</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'js/bundle.js'</span> 
<span class="token punctuation">}</span>
</code></pre></div><br> <br> <p><strong>4. 把图片文件统一生成到 image 目录中</strong></p> <p>修改 webpack.config.js 中的 <code>url-loader</code> 配置项，新增 <code>outputPath</code> 选项即可指定图片文件的输出路径：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span> 
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jpg|png|gif$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> 
    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">22228</span><span class="token punctuation">,</span>
            <span class="token comment">//明确指定把打包生成的图片文件，存储到 dist 目录下的 image 文件夹</span>
            <span class="token literal-property property">outputPath</span><span class="token operator">:</span> <span class="token string">'image'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <br> <p><strong>5. 自动清理 dist 目录下的旧文件</strong></p> <p>为了在每次打包发布时<code>自动清理掉 dist 目录中的旧文件</code>，可以安装并配置 <code>clean-webpack-plugin</code> 插件：</p> <ol><li>安装清理 dist 目录的 webpack 插件</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> clean-webpack-plugin@3.0.0 -D
</code></pre></div><ol start="2"><li>在 <code>webpack.config.js</code> 中按需导入插件、得到插件的构造函数之后，创建插件的实例对象</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> cleanPlugin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//把创建的 cleanPlugin 插件实例对象，挂载到 plugins 节点中</span>
<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>htmlPlugin<span class="token punctuation">,</span> cleanPlugin<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="source-map"><a href="#source-map" class="header-anchor">#</a> Source Map</h2> <p><strong>1. 生产环境遇到的问题</strong></p> <p>前端项目在投入生产环境之前，都需要对 JavaScript 源代码进行<code>压缩混淆</code>，从而减小文件的体积，提高文件的加载效率。此时就不可避免的产生了另一个问题：</p> <p><code>对压缩混淆之后的代码除错（debug）</code>是一件极其困难的事情</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token keyword">var</span> e<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">563</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">var</span> n<span class="token punctuation">;</span><span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span><span class="token string">&quot;object&quot;</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token punctuation">.</span>exports<span class="token operator">?</span>e<span class="token punctuation">.</span>exports<span class="token operator">=</span>t<span class="token punctuation">.</span>document<span class="token operator">?</span><span class="token function">n</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">.</span>document<span class="token punctuation">)</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;jQuery requires a window with a document&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">:</span><span class="token function">n</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token string">&quot;undefined&quot;</span><span class="token operator">!=</span><span class="token keyword">typeof</span> window<span class="token operator">?</span>window<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">r<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span><span class="token keyword">var</span> o<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token operator">=</span>Object<span class="token punctuation">.</span>getPrototypeOf<span class="token punctuation">,</span>s<span class="token operator">=</span>o<span class="token punctuation">.</span>slice<span class="token punctuation">,</span>u<span class="token operator">=</span>o<span class="token punctuation">.</span>flat<span class="token operator">?</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> o<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> o<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>l<span class="token operator">=</span>o<span class="token punctuation">.</span>push<span class="token punctuation">,</span>c<span class="token operator">=</span>o<span class="token punctuation">.</span>indexOf<span class="token punctuation">,</span>f<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>p<span class="token operator">=</span>f<span class="token punctuation">.</span>toString<span class="token punctuation">,</span>d<span class="token operator">=</span>f<span class="token punctuation">.</span>hasOwnProperty<span class="token punctuation">,</span>h<span class="token operator">=</span>d<span class="token punctuation">.</span>toString <span class="token operator">...</span><span class="token operator">...</span>省略
</code></pre></div><ul><li>变量被替换成<code>没有任何语义的名称</code></li> <li>空行和注释被剔除</li></ul> <br> <br> <p><strong>2. 什么是 Source Map</strong></p> <p><code>Source Map 就是一个信息文件，里面储存着位置信息</code>。也就是说，Source Map 文件中存储着压缩混淆后的
代码，所对应的<code>转换前的位置</code>。</p> <p>有了它，出错的时候，除错工具将<code>直接显示原始代码，而不是转换后的代码</code>，能够极大的方便后期的调试。</p> <br> <br> <p><strong>3. webpack <code>开发环境下</code>的 Source Map</strong></p> <p>在<code>开发环境下</code>，webpack <code>默认启用了</code> Source Map 功能。当程序运行出错时，可以直接在控制台提示<code>错误行</code>
的位置，并<code>定位到具体的源代码</code>。</p> <br> <p><strong>3.1 默认 Source Map 的问题</strong></p> <p>开发环境下默认生成的 Source Map，记录的是<code>生成后的代码的位置</code>。会导致<code>运行时报错的行数</code>与`源代码的行
数不一致的问题。示意图如下：</p> <img src="/assets/img/00005.b5ceb033.png" alt="结果"> <img height="120" src="/assets/img/00006.1458ac31.png" alt="结果"> <br> <p><strong>3.2 解决默认 Source Map 的问题</strong></p> <p>开发环境下，推荐在 <code>webpack.config.js</code> 中添加如下的配置，即可保证<code>运行时报错的行数</code>与<code>源代码的行数</code>
保持一致：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span> <span class="token comment">//mode 用来指定构建模式。可选值有 development 和 production</span>
    <span class="token comment">//此选项生成的 Source Map 能够保证“运行时报错的行数”与“源代码的行数”保持一致</span>
    <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">'eval-source-map'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <br> <p><strong>4. webpack <code>生产环境下</code>的 Source Map</strong></p> <p>在<code>生产环境下</code>，如果<code>省略了 devtool 选项</code>，则最终生成的文件中<code>不包含 Source Map</code>。这能够防止原始代码通
过 Source Map 的形式<code>暴露</code>给别有所图之人。</p> <img src="/assets/img/00007.2eb63395.png" alt="结果"> <img src="/assets/img/00008.9d9a3c7d.png" alt="结果"> <br> <p><strong>4.1 只定位行数不暴露源码</strong></p> <p>在生产环境下，如果<code>只想定位报错的具体行数</code>，且<code>不想暴露源码</code>。此时可以将 <code>devtool</code> 的值设置为
<code>nosources-source-map</code>。实际效果如图所示：</p> <img src="/assets/img/00009.31d03222.png" alt="结果"> <img src="/assets/img/00010.32e69ca0.png" alt="结果"> <br> <p><strong>4.2 定位行数且暴露源码</strong></p> <p>在生产环境下，如果<code>想在定位报错行数的同时，展示具体报错的源码</code>。此时可以将 <code>devtool</code> 的值设置为
<code>source-map</code>。实际效果如图所示：</p> <img src="/assets/img/00011.c9d28c4b.png" alt="结果"> <img src="/assets/img/00012.de081700.png" alt="结果"> <blockquote><p>采用此选项后：你应该将你的服务器配置为，<code>不允许普通用户访问 source map 文件</code>！</p></blockquote> <br> <br> <p><strong>5. Source Map 的最佳实践</strong></p> <ol><li>开发环境下：
<ul><li>建议把 devtool 的值设置为 <code>eval-source-map</code></li> <li>好处：可以精准定位到具体的错误行</li></ul></li> <li>生产环境下：
<ul><li>建议关闭 Source Map 或将 devtool 的值设置为 nosources-source-map</li> <li>好处：防止源码泄露，提高网站的安全性</li></ul></li></ol> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>实际开发中需要自己配置 webpack 吗？</p> <p>答案：<code>不需要！</code></p> <ul><li>实际开发中会使命令行工具（俗称 <code>CLI</code>）<code>一键生成</code>带有 webpack 的项目</li> <li>开箱即用，所有 webpack 配置项都是现成的！</li> <li>我们只需要知道 webpack 中的基本概念即可！</li></ul> <br> <ol><li>能够掌握 webpack 的基本使用
<ul><li>安装、webpack.config.js、修改打包入口</li></ul></li> <li>了解常用的 plugin 的基本使用
<ul><li>webpack-dev-server、html-webpack-plugin</li></ul></li> <li>了解常用的 loader 的基本使用
<ul><li>loader 的作用、loader 的调用过程</li></ul></li> <li>能够说出 Source Map 的作用
<ul><li>精准定位到错误行并显示对应的源码</li> <li>方便开发者调试源码中的错误</li></ul></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.622a38ae.js" defer></script><script src="/assets/js/3.dbdea4db.js" defer></script><script src="/assets/js/9.998d95d7.js" defer></script>
  </body>
</html>
